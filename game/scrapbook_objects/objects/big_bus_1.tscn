[gd_scene load_steps=15 format=3 uid="uid://bj0s44imfdpms"]

[ext_resource type="PackedScene" uid="uid://buapgxqpegef1" path="res://game/scrapbook_objects/scapbook_object.tscn" id="1_efhm1"]
[ext_resource type="Script" path="res://game/words/words/word_lists/word_list.gd" id="2_d6s56"]
[ext_resource type="Script" path="res://game/words/word.gd" id="3_h1h1g"]
[ext_resource type="Resource" uid="uid://cj785s14tpmgg" path="res://game/words/colors/colors/blue.tres" id="4_4e4jl"]
[ext_resource type="AudioStream" uid="uid://cldsltfa4o0xd" path="res://game/scrapbook_objects/objects/assets/mechanical_lock_short.wav" id="5_d7tyr"]
[ext_resource type="Script" path="res://game/scrapbook_objects/scrapbook_interaction.gd" id="5_r7a2l"]
[ext_resource type="Resource" uid="uid://c6b4h6cn4vu1f" path="res://game/words/words/you.tres" id="6_5rn6u"]
[ext_resource type="Texture2D" uid="uid://fv6mgijvg0fe" path="res://game/scrapbook_objects/assets/object_pngs/bus_big_crop.png" id="6_kxlih"]

[sub_resource type="Resource" id="Resource_1dwv5"]
script = ExtResource("3_h1h1g")
key = "BUS"
word_group = Array[String](["WORD"])

[sub_resource type="Resource" id="Resource_fwilr"]
script = ExtResource("2_d6s56")
words = Array[ExtResource("3_h1h1g")]([SubResource("Resource_1dwv5")])

[sub_resource type="Resource" id="Resource_hipgu"]
script = ExtResource("5_r7a2l")
key_word = ExtResource("6_5rn6u")
kill_sender = true
kill_receiver = false
objects_to_spawn = Array[PackedScene]([])

[sub_resource type="Shader" id="Shader_1cm4w"]
resource_local_to_scene = true
code = "shader_type canvas_item;

uniform vec4 line_color : source_color = vec4(1.0);
uniform float line_thickness : hint_range(0, 20) = 1.0;

const vec2 OFFSETS[8] = {
	vec2(-1, -1), vec2(-1, 0), vec2(-1, 1), vec2(0, -1), vec2(0, 1),
	vec2(1, -1), vec2(1, 0), vec2(1, 1)
};

void fragment() {
	vec2 size = TEXTURE_PIXEL_SIZE * line_thickness;
	float outline = 0.0;

	for (int i = 0; i < OFFSETS.length(); i++) {
		outline += texture(TEXTURE, UV + size * OFFSETS[i]).a;
	}
	outline = min(outline, 1.0);

	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, line_color, outline - color.a);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_q6g3w"]
resource_local_to_scene = true
shader = SubResource("Shader_1cm4w")
shader_parameter/line_color = Color(1, 1, 1, 1)
shader_parameter/line_thickness = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mkbg0"]
size = Vector2(9016, 2371)

[node name="ScapbookObject" instance=ExtResource("1_efhm1")]
word_list = SubResource("Resource_fwilr")
color = ExtResource("4_4e4jl")
is_movable = false
scrapbook_interactions = Array[ExtResource("5_r7a2l")]([SubResource("Resource_hipgu")])
lock_sound = ExtResource("5_d7tyr")
metadata/_edit_vertical_guides_ = [150.0, 1536.0]

[node name="Sprite2D" parent="." index="0"]
material = SubResource("ShaderMaterial_q6g3w")
position = Vector2(-360.874, -1189.9)
scale = Vector2(5.76141, 5.76141)
texture = ExtResource("6_kxlih")

[node name="CollisionShape2D" parent="." index="1"]
position = Vector2(-425, -1107.5)
shape = SubResource("RectangleShape2D_mkbg0")
debug_color = Color(1.29953e-05, 0.958176, 0.598779, 0.42)

[node name="AudioStreamPlayer2D" parent="." index="3"]
unique_name_in_owner = true

[node name="Camera2D" parent="." index="4"]
zoom = Vector2(0.05, 0.05)
