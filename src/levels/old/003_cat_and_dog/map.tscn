[gd_scene load_steps=9 format=3 uid="uid://p0gibb5ueeky"]

[ext_resource type="PackedScene" uid="uid://cijyqmhnatnfp" path="res://src/components/level_map/level_map.tscn" id="1_gn4id"]
[ext_resource type="Script" path="res://src/managers/quest_manager/quests/quest_interact_with_node.gd" id="2_p5yj0"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_map_start.gd" id="3_gsir5"]
[ext_resource type="Script" path="res://src/managers/event_manager/events/event_appear_temporarily.gd" id="4_6efs2"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_body_touched_map_object.gd" id="5_7ofjy"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_quest_finished.gd" id="6_jno5e"]
[ext_resource type="PackedScene" uid="uid://c0ih74a4ofoin" path="res://src/components/level_elements/object/_map_object_interactable.tscn" id="7_j0a0m"]

[sub_resource type="CircleShape2D" id="CircleShape2D_8ard5"]

[node name="Map2" type="Node2D"]

[node name="LevelMap" parent="." instance=ExtResource("1_gn4id")]

[node name="QuestInteractWithCat" type="Node2D" parent="LevelMap/Events" index="0" node_paths=PackedStringArray("target", "move_target_after_demo", "start_condition")]
script = ExtResource("2_p5yj0")
target = NodePath("../../Objects/Cat")
move_target_after_demo = NodePath("../../Objects/Tutor Move Out The Way")
start_condition = NodePath("ConditionMapStart")

[node name="ConditionMapStart" type="Node" parent="LevelMap/Events/QuestInteractWithCat"]
script = ExtResource("3_gsir5")

[node name="EventAppearTemporarily" type="Node2D" parent="LevelMap/Events" index="1" node_paths=PackedStringArray("appearing_node", "start_condition", "end_condition")]
script = ExtResource("4_6efs2")
appearing_node = NodePath("../../Objects/Tutorial")
start_condition = NodePath("ConditionBodyTouchedMapObject")
end_condition = NodePath("ConditionQuestFinished")
delay_before_start = 2

[node name="ConditionBodyTouchedMapObject" type="Node" parent="LevelMap/Events/EventAppearTemporarily" node_paths=PackedStringArray("body", "map_object")]
script = ExtResource("5_7ofjy")
body = NodePath("../../../Objects/Tutor")
map_object = NodePath("../../../Objects/Cat")

[node name="ConditionQuestFinished" type="Node" parent="LevelMap/Events/EventAppearTemporarily" node_paths=PackedStringArray("quest_that_we_await")]
script = ExtResource("6_jno5e")
quest_that_we_await = NodePath("../../QuestInteractWithCat")

[node name="Tutor" parent="LevelMap/Objects" index="0"]
visible = true

[node name="Cat" parent="LevelMap/Objects" index="1" instance=ExtResource("7_j0a0m")]
position = Vector2(110, -48)

[node name="Stool" parent="LevelMap/Objects" index="2" instance=ExtResource("7_j0a0m")]
z_index = 2
position = Vector2(104, 1)

[node name="Tutorial" type="CanvasLayer" parent="LevelMap/Objects" index="3"]
visible = false

[node name="TutorialLabel" type="Label" parent="LevelMap/Objects/Tutorial"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -251.0
offset_right = 251.0
offset_bottom = 23.0
grow_horizontal = 2
text = "To interact with an object, walk to it and click it with your mouse."

[node name="Tutor Move Out The Way" type="Area2D" parent="LevelMap/Objects" index="4"]
position = Vector2(216, -34)
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelMap/Objects/Tutor Move Out The Way"]
shape = SubResource("CircleShape2D_8ard5")

[editable path="LevelMap"]
[editable path="LevelMap/PlayerCameraCombo"]
