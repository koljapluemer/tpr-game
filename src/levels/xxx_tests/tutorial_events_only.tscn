[gd_scene load_steps=17 format=3 uid="uid://wb6dhf3e6sur"]

[ext_resource type="PackedScene" uid="uid://ch1dasi7hoqmq" path="res://src/components/level_map/level_map_old.tscn" id="1_3vuvg"]
[ext_resource type="Script" path="res://src/managers/dialog_manager/dialog_manager.gd" id="2_rc7xd"]
[ext_resource type="Script" path="res://src/managers/event_manager/events/event_appear_temporarily.gd" id="3_l3bhv"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_map_start.gd" id="4_4mopp"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_body_touched_area.gd" id="5_m1vsk"]
[ext_resource type="Script" path="res://src/managers/event_manager/events/event_appear.gd" id="6_8owdq"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_logic_all.gd" id="7_uta66"]
[ext_resource type="Script" path="res://src/managers/conditions/condition_event_finished.gd" id="8_d4c3i"]
[ext_resource type="Script" path="res://src/managers/event_manager/events/event_say.gd" id="9_a5wlk"]
[ext_resource type="Resource" uid="uid://dgdesc84q06sb" path="res://src/shared/data/dialog/greeting_hello.tres" id="10_7p3q7"]
[ext_resource type="Script" path="res://src/managers/event_manager/events/event_walk.gd" id="11_mcg3u"]
[ext_resource type="Resource" uid="uid://d3g7j5spsblps" path="res://src/shared/data/dialog/walking_to_laptop.tres" id="12_yirwx"]
[ext_resource type="PackedScene" uid="uid://cfdydj1akl3a1" path="res://src/components/level_elements/tutor/tutor.tscn" id="13_ts20g"]
[ext_resource type="PackedScene" uid="uid://c3kb11aex0ss6" path="res://src/components/level_elements/object/map_object.tscn" id="14_gbgvo"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o7nty"]
size = Vector2(60, 80)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wdcif"]
size = Vector2(290, 80)

[node name="level" type="Node2D"]

[node name="LevelMap" parent="." instance=ExtResource("1_3vuvg")]

[node name="DialogManager" type="Node" parent="LevelMap"]
script = ExtResource("2_rc7xd")

[node name="Events" type="Node2D" parent="LevelMap"]

[node name="EventShowControlScheme" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("appearing_node", "start_condition", "end_condition")]
script = ExtResource("3_l3bhv")
appearing_node = NodePath("../../Objects/CanvasLayer")
start_condition = NodePath("ConditionMapStart")
end_condition = NodePath("ConditionBodyTouchedArea")

[node name="ConditionMapStart" type="Node" parent="LevelMap/Events/EventShowControlScheme" node_paths=PackedStringArray("map")]
script = ExtResource("4_4mopp")
map = NodePath("../../..")

[node name="ConditionBodyTouchedArea" type="Node" parent="LevelMap/Events/EventShowControlScheme" node_paths=PackedStringArray("body", "area")]
script = ExtResource("5_m1vsk")
body = NodePath("../../../PlayerCameraCombo/Player")
area = NodePath("../../../Objects/AreaProvesPlayerWalked")

[node name="EventTutorShow" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("appearing_node", "start_condition")]
script = ExtResource("6_8owdq")
appearing_node = NodePath("../../Objects/Tutor")
start_condition = NodePath("ConditionLogicAll")
delay_before_start = 3

[node name="ConditionLogicAll" type="Node" parent="LevelMap/Events/EventTutorShow" node_paths=PackedStringArray("conditions")]
script = ExtResource("7_uta66")
conditions = [NodePath("ConditionBodyTouchedArea"), NodePath("ConditionEventFinished")]

[node name="ConditionBodyTouchedArea" type="Node" parent="LevelMap/Events/EventTutorShow/ConditionLogicAll" node_paths=PackedStringArray("body", "area")]
script = ExtResource("5_m1vsk")
body = NodePath("../../../../PlayerCameraCombo/Player")
area = NodePath("../../../../Objects/TutorAppearTrigger")

[node name="ConditionEventFinished" type="Node" parent="LevelMap/Events/EventTutorShow/ConditionLogicAll" node_paths=PackedStringArray("event")]
script = ExtResource("8_d4c3i")
event = NodePath("../../../EventShowControlScheme")

[node name="EventSayGreeting" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("dialog_manager", "start_condition")]
script = ExtResource("9_a5wlk")
dialog = ExtResource("10_7p3q7")
dialog_manager = NodePath("../../DialogManager")
start_condition = NodePath("ConditionEventFinished")
delay_before_start = 2

[node name="ConditionEventFinished" type="Node" parent="LevelMap/Events/EventSayGreeting" node_paths=PackedStringArray("event")]
script = ExtResource("8_d4c3i")
event = NodePath("../../EventTutorShow")

[node name="EventAppearLaptop" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("appearing_node", "start_condition")]
script = ExtResource("6_8owdq")
appearing_node = NodePath("../../Objects/Laptop")
start_condition = NodePath("ConditionEventGreetingFinished")
delay_before_start = 5

[node name="ConditionEventGreetingFinished" type="Node" parent="LevelMap/Events/EventAppearLaptop" node_paths=PackedStringArray("event")]
script = ExtResource("8_d4c3i")
event = NodePath("../../EventSayGreeting")

[node name="EventWalkTutorToLaptop" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("destination_node", "walker", "start_condition")]
script = ExtResource("11_mcg3u")
destination_node = NodePath("../../Objects/Laptop")
walker = NodePath("../../Objects/Tutor")
start_condition = NodePath("ConditionEventFinished")
delay_before_start = 4

[node name="ConditionEventFinished" type="Node" parent="LevelMap/Events/EventWalkTutorToLaptop" node_paths=PackedStringArray("event")]
script = ExtResource("8_d4c3i")
event = NodePath("../../EventAppearLaptop")

[node name="EventSayWalkingToLaptop" type="Node2D" parent="LevelMap/Events" node_paths=PackedStringArray("dialog_manager", "start_condition")]
script = ExtResource("9_a5wlk")
dialog = ExtResource("12_yirwx")
dialog_manager = NodePath("../../DialogManager")
start_condition = NodePath("ConditionEventFinished2")
delay_before_start = 4

[node name="ConditionEventFinished2" type="Node" parent="LevelMap/Events/EventSayWalkingToLaptop" node_paths=PackedStringArray("event")]
script = ExtResource("8_d4c3i")
event = NodePath("../../EventAppearLaptop")

[node name="Objects" type="Node2D" parent="LevelMap"]

[node name="Tutor" parent="LevelMap/Objects" node_paths=PackedStringArray("player") instance=ExtResource("13_ts20g")]
visible = false
position = Vector2(-138, -54)
player = NodePath("../../PlayerCameraCombo/Player")

[node name="CanvasLayer" type="CanvasLayer" parent="LevelMap/Objects"]
visible = false

[node name="Label" type="Label" parent="LevelMap/Objects/CanvasLayer"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "move with the arrow keys."

[node name="AreaProvesPlayerWalked" type="Area2D" parent="LevelMap/Objects"]
position = Vector2(-32, -3.8147e-06)

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelMap/Objects/AreaProvesPlayerWalked"]
position = Vector2(-129, -40)
shape = SubResource("RectangleShape2D_o7nty")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="LevelMap/Objects/AreaProvesPlayerWalked"]
position = Vector2(135, -40)
shape = SubResource("RectangleShape2D_o7nty")

[node name="TutorAppearTrigger" type="Area2D" parent="LevelMap/Objects"]
position = Vector2(-32, -3.8147e-06)

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelMap/Objects/TutorAppearTrigger"]
position = Vector2(105, -40)
shape = SubResource("RectangleShape2D_wdcif")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="LevelMap/Objects/TutorAppearTrigger"]
position = Vector2(-349, -40)
shape = SubResource("RectangleShape2D_wdcif")

[node name="Laptop" parent="LevelMap/Objects" instance=ExtResource("14_gbgvo")]
visible = false
z_index = 2
position = Vector2(136, -8)

[editable path="LevelMap"]
[editable path="LevelMap/PlayerCameraCombo"]
